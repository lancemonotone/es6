{"version":3,"sources":["","../src/phones.es6"],"names":[],"mappings":"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","file":"C:/htdocs/es6/assets/js/out/phones.js","sourcesContent":[null,"(function () {\r\n    \"use strict\";\r\n\r\n    const SPENDING_THRESHOLD = 800;\r\n    const TAX_AMOUNT = 0.085;\r\n    const PHONES_INVENTORY = [\r\n        {name: 'iPhone', price: 649},\r\n        {name: 'Galaxy S6', price: 576},\r\n        {name: 'Galaxy Note 5', price: 489}\r\n    ];\r\n    const ACCESSORIES_INVENTORY = [\r\n        {name: 'Charger', price: 53},\r\n        {name: 'Case', price: 78},\r\n        {name: 'Bluetooth', price: 96}\r\n    ];\r\n\r\n    class Utility {\r\n        static getRandomElement(arr) {\r\n            return arr[Math.floor(Math.random() * arr.length)]\r\n        }\r\n\r\n        static formatAmount(amount) {\r\n            return `$${amount.toFixed(2)}`;\r\n        }\r\n\r\n        static dividerTemplate(char = '-', length = 20) {\r\n            return `${new Array(length).join(char)}`;\r\n        }\r\n    }\r\n\r\n    class PurchaseModel {\r\n        constructor(options) {\r\n            this.subtotal = 0;\r\n            this.taxAmount = options.taxAmount;\r\n            this.threshold = options.threshold;\r\n\r\n            this.purchase = this.doPurchase;\r\n            this.tax = this.calculateTax;\r\n            this.total = this.calculateTotal;\r\n\r\n            return {\r\n                purchase: this.purchase,\r\n                subtotal: this.subtotal,\r\n                tax: this.tax,\r\n                total: this.total,\r\n                render: this.render\r\n            }\r\n        }\r\n\r\n        /**\r\n         * @returns {string}\r\n         */\r\n        render() {}\r\n\r\n        /**\r\n         * @returns {object}\r\n         */\r\n        doPurchase() {}\r\n\r\n        /**\r\n         * @returns {number}\r\n         */\r\n        calculateTax() {\r\n            return this.subtotal * this.taxAmount;\r\n        }\r\n\r\n        calculateTotal() {\r\n            return this.subtotal + this.tax;\r\n        }\r\n\r\n        isUnderThreshold(price) {\r\n            return this.subtotal + price <= this.threshold\r\n        }\r\n    }\r\n\r\n    class PhonePurchaseModel extends PurchaseModel {\r\n        constructor(options) {\r\n            super(options);\r\n            this.phonesInventory = options.phonesInventory;\r\n            this.accessoriesInventory = options.accessoriesInventory;\r\n\r\n            this.purchase = this.doPurchase();\r\n            this.tax = this.calculateTax();\r\n            this.total = this.calculateTotal();\r\n        }\r\n\r\n        render() {\r\n            let accessories = this.purchase.accessories;\r\n            let items = accessories.items;\r\n\r\n            let phoneTemplate = `${this.purchase.phone.name} ${Utility.formatAmount(this.purchase.phone.price)}`;\r\n            let accessoryTemplate = [];\r\n\r\n            for (let i = 0; i < items.length; i++) {\r\n                accessoryTemplate.push(`\\t${items[i].name} ${Utility.formatAmount(items[i].price)}`);\r\n            }\r\n            accessoryTemplate.push(`Accessories ${Utility.formatAmount(accessories.total)}`);\r\n            accessoryTemplate = accessoryTemplate.join('\\n');\r\n\r\n            let totalTemplate = `\r\nSubtotal: ${Utility.formatAmount(this.subtotal)}\r\nTax: ${Utility.formatAmount(this.tax)}\r\nTotal: ${Utility.formatAmount(this.total)}`;\r\n\r\n            return `\r\n${phoneTemplate}\r\n\r\n${accessoryTemplate}\r\n${totalTemplate}`;\r\n        }\r\n\r\n        doPurchase() {\r\n            return {\r\n                \"phone\": this.getPhone(),\r\n                \"accessories\": this.getAccessories()\r\n            }\r\n        }\r\n\r\n        getPhone() {\r\n            let phone = Utility.getRandomElement(this.phonesInventory);\r\n            if (this.isUnderThreshold(phone.price)) {\r\n                this.subtotal += phone.price;\r\n                return phone;\r\n            }\r\n        }\r\n\r\n        getAccessories(accessories) {\r\n            accessories = accessories || {\r\n                    total: 0,\r\n                    items: []\r\n                };\r\n\r\n            let accessory = Utility.getRandomElement(this.accessoriesInventory);\r\n\r\n            if (this.isUnderThreshold(accessory.price)) {\r\n                accessories.items.push(accessory);\r\n                accessories.total += accessory.price;\r\n                this.subtotal += accessory.price;\r\n                return this.getAccessories(accessories);\r\n            } else {\r\n                return accessories;\r\n            }\r\n        }\r\n    }\r\n\r\n    class PurchasesModel {\r\n        constructor() {\r\n            this.purchases = [];\r\n            this.total = 0;\r\n            return {\r\n                total: this.total,\r\n                purchases: this.purchases,\r\n                count: this.getCount,\r\n                addPurchase: this.addPurchase,\r\n                render: this.render\r\n            }\r\n        }\r\n\r\n        render(options) {\r\n            let summaryTemplate = `\r\n${this.count()} ${options.title || \"Purchase(s)\"}   ${Utility.formatAmount(this.total)}`;\r\n            let purchaseTemplate = [];\r\n\r\n            for (let i = 0; i < this.purchases.length; i++) {\r\n                purchaseTemplate.push(`${this.purchases[i].render()}`);\r\n            }\r\n\r\n            purchaseTemplate = purchaseTemplate.join('\\n' + Utility.dividerTemplate());\r\n\r\n            return `${purchaseTemplate}\r\n${Utility.dividerTemplate('=')}\r\n${summaryTemplate}`;\r\n        }\r\n\r\n        getCount() {\r\n            return this.purchases.length;\r\n        }\r\n\r\n        addPurchase(purchase) {\r\n            this.total += purchase.total;\r\n            this.purchases.push(purchase);\r\n        }\r\n    }\r\n\r\n    let phonePurchaseOptions = {\r\n        taxAmount: TAX_AMOUNT,\r\n        phonesInventory: PHONES_INVENTORY,\r\n        accessoriesInventory: ACCESSORIES_INVENTORY,\r\n        threshold: SPENDING_THRESHOLD\r\n    };\r\n\r\n    let myBalance = 10000;\r\n    let phones = new PurchasesModel();\r\n\r\n    while (myBalance >= 0) {\r\n        let phone = new PhonePurchaseModel(phonePurchaseOptions);\r\n        if (myBalance - phone.total >= 0) {\r\n            phones.addPurchase(phone);\r\n            myBalance -= phone.total;\r\n        } else {\r\n            break;\r\n        }\r\n    }\r\n\r\n    console.log(`${phones.render({title: 'Phone(s)'})}`);\r\n\r\n})();"]}